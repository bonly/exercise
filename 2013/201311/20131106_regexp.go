package main 

import (
"regexp"
"fmt"
)

//func (re *Regexp) FindAllStringIndex(s string, n int) [][]int

func main() {
	reg := regexp.MustCompile(`\d\|\d*`)
	//fmt.Println(reg.FindAllStringIndex("1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000", -1))
	// [[0 5] [6 11]]
	str := "1|28000,1|28001,1|28002,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000,1|28000";
	for _, mt := range (reg.FindAllStringIndex(str, -1)){
		// fmt.Println(i, ": ", mt);
		var vl,mo int
		// fmt.Println(str[mt[0]:mt[1]])
		fmt.Sscanf(str[mt[0]:mt[1]], "%d|%d", &vl, &mo);
		fmt.Printf("vl: %d    mo: %d\n", vl, mo);
	}
}
